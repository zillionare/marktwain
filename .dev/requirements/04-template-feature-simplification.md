# 模板功能简化设计需求

## 功能概述

本文档记录了模板功能从复杂设计到简化设计的演进过程，以及最终的功能需求。

## 原始功能实现（已完成）

### 1. 模板数据管理
- 在 `stores/index.ts` 中实现了模板的状态管理
- 支持模板的增删改查操作
- 实现了 localStorage 持久化存储
- 模板数据结构包含：id、name、description、content、createdAt、updatedAt

### 2. 模板管理界面
- 创建了 `TemplateManagerDialog.vue` 对话框组件
- 实现了左右分栏布局：左侧模板列表，右侧编辑/预览区
- 支持模板的创建、编辑、删除、预览功能
- 集成了安全的 iframe 预览功能

### 3. 模板菜单集成
- 在 `EditorHeader/index.vue` 中集成了模板下拉菜单
- 创建了 `TemplateDropdown.vue` 组件
- 支持模板插入到编辑器光标位置

### 4. 默认模板
- 添加了 HTML 容器、表格模板、代码块模板等默认模板

## 简化设计需求（新需求）

### 1. 菜单结构调整
- **新建模板** - 创建新模板的入口
- **保存模板** - 保存当前编辑内容为模板
- **分隔线** - 视觉分隔
- **已有模板列表** - 显示所有已保存的模板名称
  - 每个模板后面添加：
    - 删除符号（🗑️）- 删除模板
    - 修改符号（✏️）- 编辑模板

### 2. 编辑区域复用
- 模板编辑直接在现有的编辑区进行，不再使用独立对话框
- 点击"新建模板"或"修改模板"时的检查逻辑：
  - 检查编辑区是否为空（允许纯空白符）
  - 如果不为空，提示用户："必须手动保存工作区内容并清空后，才能继续操作"
  - 用户需要手动处理后才能继续

### 3. 模板保存流程
- 用户编辑完成后，点击"保存模板"按钮
- 弹出对话框，要求用户输入模板名称
- 检查名称是否重复，如无重复则保存成功
- 保存后退出模板编辑状态

### 4. 状态管理
- 需要维护"模板编辑状态"标识
- 非模板编辑状态下，"保存模板"按钮应为灰色（禁用状态）
- 模板编辑状态下，"保存模板"按钮为可用状态

## 技术实现要点

### 1. 状态管理增强
- 添加 `isTemplateEditing` 状态标识
- 添加 `currentEditingTemplateId` 用于区分新建和编辑模式

### 2. 编辑器内容检查
- 实现内容为空的检查逻辑（忽略空白符）
- 实现用户提示机制

### 3. UI 组件调整
- 简化 TemplateDropdown 组件，移除复杂的对话框
- 添加模板名称输入对话框组件
- 调整菜单项的图标和交互

### 4. 用户体验优化
- 清晰的状态提示
- 防误操作的确认机制
- 直观的编辑状态指示

## 设计原则

1. **简化优先** - 减少复杂的界面和交互
2. **复用现有** - 最大化利用现有编辑区域
3. **状态清晰** - 用户始终知道当前处于什么状态
4. **防误操作** - 重要操作前进行确认和提示

## 实现优先级

1. **高优先级**：菜单结构调整、编辑区复用逻辑
2. **中优先级**：状态管理、保存流程
3. **低优先级**：UI 优化、用户体验细节

---

*文档创建时间：2025年1月26日*
*状态：待实现*
