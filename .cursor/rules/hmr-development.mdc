---
alwaysApply: true
---
# HMR 开发环境规则

## 开发环境配置

### 服务器状态
- **服务器始终运行**：开发服务器在后台持续运行
- **HMR 支持**：支持热模块替换，代码修改后自动生效
- **无需手动重启**：修改代码后无需手动重启服务器

### 开发工作流
1. **修改代码**：直接编辑源代码文件
2. **自动重载**：HMR 自动检测变化并更新
3. **即时测试**：修改后立即在浏览器中测试效果

## 代码修改最佳实践

### 渲染器修改
- 修改 [packages/core/src/renderer/renderer-impl.ts](mdc:packages/core/src/renderer/renderer-impl.ts) 后自动生效
- 无需运行 `pnpm build` 或重启服务器
- 修改后直接在浏览器中测试

### 前端组件修改
- 修改 [apps/web/src/](mdc:apps/web/src/) 下的组件后自动更新
- 状态保持：HMR 会保持应用状态，只更新修改的部分

### 样式修改
- CSS/SCSS 修改后立即生效
- 支持样式热替换，无需刷新页面

## 调试和测试

### 实时调试
- 使用浏览器开发者工具进行实时调试
- 修改代码后立即看到效果
- 支持断点调试和变量检查

### 功能测试
- 转图功能：修改后立即测试 mermaid 转图
- 渲染效果：修改渲染器后立即查看渲染结果
- 交互功能：修改 UI 组件后立即测试交互

## 注意事项

### 避免的操作
- ❌ 不要运行 `pnpm build` 进行开发测试
- ❌ 不要手动重启开发服务器
- ❌ 不要等待构建完成

### 推荐的操作
- ✅ 直接修改代码并保存
- ✅ 在浏览器中立即测试
- ✅ 使用开发者工具调试
- ✅ 利用 HMR 的即时反馈进行快速迭代
